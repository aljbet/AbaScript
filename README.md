# AbaScript

Примеры использования можно найти по адресу /SourceCode/abas_cripts/

### Синтаксис

Исполняемый код должен быть написан внутри функции `main()`

```
func int main() {
    return 0;
}
```

Типы переменных: `int`, `int[]`. Для массива задается начальный неизменяемый размер.
Доступ к элементам массива по индексу. Значение по умолчанию - 0.

Поддерживается логическое ветвление и цикл for.

### Как это работает?

Исходный код при помощи ANTLR4 преобразуется в абстрактное синтаксическое дерево (AST). 
Затем есть три способа исполнения:

1. Интерпретатор AST. Проходясь по дереву, преобразует инструкции в C# и 
    построчно их исполняет. Поддерживает работу с классами.
    ``` 
   // SourceCode/Program.cs
   
   var runService = new InterpreterService();
   ```
2. LLVM. Проходясь по дереву, составляет LLVM IR, который
потом исполняется с оптимизациями.
    ```
   // SourceCode/Program.cs
   
   var runService = new LLVMService();
   ```
3. Компиляция в спроектированный нами байткод. При интерпретации применяется оптимизация loop unroll:
цикл частично разворачивается, чтобы уменьшить количество логических проверок.
   ```
   // CompileLanguage/Program.cs

   var runService = new CompilerService();
   ```